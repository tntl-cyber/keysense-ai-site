<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeySense AI Analysis Report</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #F9FAFB;
            --bg-card: #FFFFFF;
            --primary: #4F46E5;
            --text-main: #111827;
            --text-sub: #6B7280;
            --accent-lock: #DC2626;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg-body); color: var(--text-main); margin: 0; padding: 0; }
        
        /* LAYOUT */
        .main-wrapper { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        
        /* HERO */
        .hero { text-align: center; margin-bottom: 50px; }
        .hero h1 { font-size: 2.8rem; font-weight: 800; margin-bottom: 15px; color: var(--text-main); letter-spacing: -1px; }
        .hero p { color: var(--text-sub); font-size: 1.2rem; }

        /* INPUT AREA */
        .search-container { max-width: 700px; margin: 0 auto 50px; position: relative; }
        .input-box { display: flex; gap: 10px; background: white; padding: 8px; border-radius: 12px; box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1); border: 1px solid #E5E7EB; }
        .input-box input { flex: 1; padding: 16px; border: none; font-size: 1.1rem; outline: none; border-radius: 8px; }
        .btn-analyze { background: #111827; color: white; border: none; padding: 16px 32px; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 1rem; transition: transform 0.2s; }
        .btn-analyze:hover { transform: scale(1.02); background: black; }

        /* LOADING */
        .loader { display: none; text-align: center; margin: 60px 0; }
        .spinner { width: 50px; height: 50px; border: 5px solid #E5E7EB; border-top: 5px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* REPORT GRID */
        .report-grid { display: none; grid-template-columns: 2.5fr 1fr; gap: 30px; opacity: 0; transition: opacity 0.5s; }
        .col-main { display: flex; flex-direction: column; gap: 30px; }
        .col-side { display: flex; flex-direction: column; gap: 30px; }

        /* CARDS */
        .card { background: var(--bg-card); border-radius: 16px; padding: 30px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid #F3F4F6; position: relative; overflow: hidden; }
        .card-header { font-size: 1.2rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; padding-bottom: 15px; border-bottom: 1px solid #F3F4F6; }
        .icon { width: 24px; height: 24px; color: var(--primary); }

        /* TAGS */
        .tags-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px; }
        .tag { background: #EEF2FF; color: var(--primary); padding: 8px 16px; border-radius: 8px; font-weight: 600; font-size: 0.9rem; border: 1px solid #E0E7FF; }
        .tag.gap { background: #FEF2F2; color: #DC2626; border-color: #FEE2E2; }

        /* BLURRED FAKE TAGS */
        .blur-tags-area { display: flex; flex-wrap: wrap; gap: 10px; opacity: 0.4; filter: blur(5px); user-select: none; pointer-events: none; margin-top: 10px; }
        .fake-tag { background: #F3F4F6; color: transparent; height: 34px; border-radius: 8px; width: 100px; } /* Dynamic width in JS */

        /* ARTICLES */
        .article-item { padding: 20px 0; border-bottom: 1px solid #F3F4F6; }
        .article-title { font-weight: 700; font-size: 1.1rem; margin-bottom: 8px; display: block; color: #1F2937; }
        .article-desc { color: var(--text-sub); font-size: 0.95rem; line-height: 1.5; }

        /* BLURRED ARTICLE */
        .fake-article { padding: 20px 0; opacity: 0.3; filter: blur(4px); user-select: none; }
        .fake-line { height: 12px; background: #E5E7EB; margin-bottom: 10px; border-radius: 4px; }
        .w-60 { width: 60%; } .w-90 { width: 90%; } .w-40 { width: 40%; }

        /* CTA OVERLAY (THE MONEY MAKER) */
        .overlay-gradient {
            position: absolute; bottom: 0; left: 0; right: 0; 
            height: 180px; 
            background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 60%);
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 30px; z-index: 10;
        }
        .btn-upgrade { 
            background: #FF642D; color: white; text-decoration: none; padding: 14px 30px; 
            border-radius: 50px; font-weight: 700; font-size: 1.1rem; 
            box-shadow: 0 10px 25px -5px rgba(255, 100, 45, 0.5); 
            transition: transform 0.2s; display: flex; align-items: center; gap: 8px;
        }
        .btn-upgrade:hover { transform: translateY(-3px); box-shadow: 0 15px 30px -5px rgba(255, 100, 45, 0.6); }

        /* SIDEBAR STATS */
        .stat-card { background: #1F2937; color: white; text-align: center; padding: 40px 20px; border-radius: 16px; margin-bottom: 30px; }
        .stat-num { font-size: 3.5rem; font-weight: 800; color: #34D399; line-height: 1; margin-bottom: 10px; }
        .stat-label { font-size: 1.1rem; opacity: 0.9; font-weight: 500; }

        @media (max-width: 800px) { .report-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="hero">
        <h1>Competitor Intelligence Engine</h1>
        <p>Reverse-engineer any website's SEO strategy in seconds.</p>
    </div>

    <div class="search-container" id="searchArea">
        <div class="input-box">
            <input type="text" id="urlInput" placeholder="Enter competitor URL (e.g., nike.com)">
            <button class="btn-analyze" onclick="startAnalysis()">Run Audit</button>
        </div>
    </div>

    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>Scanning search intent & content gaps...</p>
    </div>

    <div class="report-grid" id="report">
        
        <!-- LEFT COLUMN -->
        <div class="col-main">
            
            <!-- SUMMARY -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    Strategic Overview
                </div>
                <div id="summaryText" style="line-height: 1.7; color: #4B5563;"></div>
            </div>

            <!-- MONEY KEYWORDS (BLURRED) -->
            <div class="card" style="padding-bottom: 0;">
                <div class="card-header">
                    <svg class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    Money Keywords (High Intent)
                </div>
                <!-- Real Data -->
                <div class="tags-container" id="moneyContainer"></div>
                
                <!-- Fake Blurred Data -->
                <div class="blur-tags-area" id="fakeMoneyTags">
                    <!-- JS will fill this with random lengths -->
                </div>

                <!-- CTA -->
                <div class="overlay-gradient">
                    <p style="margin-bottom: 15px; font-weight: 600; color: #374151;">+ 850 Hidden Keywords found</p>
                    <a href="YOUR_SEMRUSH_AFFILIATE_LINK" class="btn-upgrade" target="_blank">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                        Unlock Full List
                    </a>
                </div>
            </div>

            <!-- CONTENT GAP -->
            <div class="card">
                <div class="card-header">
                    <svg class="icon" style="color: #DC2626;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                    Critical Content Gaps
                </div>
                <div class="tags-container" id="gapContainer"></div>
                <div class="blur-tags-area" id="fakeGapTags"></div>
            </div>

            <!-- ARTICLES STRATEGY -->
            <div class="card" style="padding-bottom: 60px;">
                <div class="card-header">
                    <svg class="icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" /></svg>
                    Recommended Content Plan
                </div>
                <div id="articlesContainer"></div>
                
                <!-- Fake Blurred Articles -->
                <div class="fake-article">
                    <div class="fake-line w-60" style="background: #111827; height: 16px;"></div>
                    <div class="fake-line w-90"></div>
                    <div class="fake-line w-40"></div>
                </div>
                <div class="fake-article">
                    <div class="fake-line w-60" style="background: #111827; height: 16px;"></div>
                    <div class="fake-line w-90"></div>
                    <div class="fake-line w-40"></div>
                </div>

                <div class="overlay-gradient" style="height: 120px;">
                    <a href="YOUR_SEMRUSH_AFFILIATE_LINK" class="btn-upgrade" target="_blank">View All Article Ideas</a>
                </div>
            </div>

        </div>

        <!-- RIGHT COLUMN -->
        <div class="col-side">
            <div class="stat-card">
                <div class="stat-label">Total Opportunity</div>
                <div class="stat-num" id="hiddenCount">500+</div>
                <div style="font-size: 0.9rem; opacity: 0.7;">Hidden Keywords</div>
            </div>

            <div class="card">
                <div class="card-header">Top Recommendations</div>
                <div id="recContainer"></div>
            </div>
        </div>

    </div>
</div>

<script>
    // Funkcija za generiranje la≈ænih zamegljenih elementov
    function generateFakeTags(elementId, count) {
        const container = document.getElementById(elementId);
        container.innerHTML = '';
        for(let i=0; i<count; i++) {
            // Nakljuƒçna ≈°irina za realizem
            let width = Math.floor(Math.random() * (150 - 60 + 1) + 60);
            container.innerHTML += `<div class="fake-tag" style="width: ${width}px;"></div>`;
        }
    }

    async function startAnalysis() {
        const url = document.getElementById('urlInput').value;
        if (!url || url.length < 4) return alert("Enter URL");

        document.getElementById('searchArea').style.display = 'none';
        document.getElementById('loader').style.display = 'block';

        try {
            const res = await fetch(`/api/analyze?url=${encodeURIComponent(url)}`);
            const data = await res.json();

            // 1. Fill Real Data
            document.getElementById('summaryText').innerText = data.competitor_summary;
            document.getElementById('hiddenCount').innerText = (data.hidden_keywords_count || 1200) + "+";

            const moneyBox = document.getElementById('moneyContainer');
            moneyBox.innerHTML = '';
            if(data.money_list_keywords) {
                data.money_list_keywords.forEach(kw => {
                    moneyBox.innerHTML += `<div class="tag">${kw}</div>`;
                });
            }

            const gapBox = document.getElementById('gapContainer');
            gapBox.innerHTML = '';
            if(data.content_gap_keywords) {
                data.content_gap_keywords.forEach(kw => {
                    gapBox.innerHTML += `<div class="tag gap">${kw}</div>`;
                });
            }

            const artBox = document.getElementById('articlesContainer');
            artBox.innerHTML = '';
            if(data.article_ideas) {
                data.article_ideas.forEach(art => {
                    artBox.innerHTML += `
                        <div class="article-item">
                            <span class="article-title">üìù ${art.title}</span>
                            <span class="article-desc">${art.outline}</span>
                        </div>
                    `;
                });
            }

            const recBox = document.getElementById('recContainer');
            recBox.innerHTML = '';
            if(data.recommendations) {
                data.recommendations.forEach(rec => {
                    recBox.innerHTML += `
                        <div style="margin-bottom: 15px; font-size: 0.9rem;">
                            <strong style="display:block; margin-bottom:4px;">‚úÖ ${rec.title}</strong>
                            <span style="color:#6B7280;">${rec.desc}</span>
                        </div>
                    `;
                });
            }

            // 2. Generate Fake Blurred Data (Visual FOMO)
            generateFakeTags('fakeMoneyTags', 15);
            generateFakeTags('fakeGapTags', 8);

            document.getElementById('loader').style.display = 'none';
            const report = document.getElementById('report');
            report.style.display = 'grid';
            setTimeout(() => report.style.opacity = '1', 100);

        } catch (e) {
            alert("Error loading data. Please try again.");
            location.reload();
        }
    }
</script>

</body>
</html>